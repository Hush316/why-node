import"./base-5abc892d.js";import{f as B}from"./el-button-9b3b308d.js";import{E as M}from"./el-message-cfa4b0b8.js";import{E as $,a as W,b as j,c as G}from"./el-col-1cb83c9b.js";import{E as L,a as z,u as H}from"./el-overlay-f2a1ea88.js";import"./el-tooltip-9505b920.js";import{E as Q,a as T}from"./index-83542812.js";import{d as q,as as A,au as b,o as t,c as E,a as g,w as r,F as x,aw as F,m as i,n as k,p as D,y as P,u as y,ax as J}from"./runtime-core.esm-bundler-e80ae98b.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import"./page-modal.vue_vue_type_style_index_0_scoped_d19b8773_lang-25079ebe.js";const K={class:"search"},X={class:"btns"},Y=q({__name:"page-search",props:{searchConfig:null},emits:["queryClick","resetClick"],setup(n,{emit:m}){const p=n,c={};for(const _ of p.searchConfig.formItems)c[_.prop]=_.initialValue??"";const e=A(c),a=b(),C=()=>{var _;(_=a.value)==null||_.resetFields(),m("resetClick")},V=()=>{m("queryClick",e)};return(_,N)=>{const R=M,s=$,u=L,f=z,v=Q,U=W,w=j,S=T,I=B;return t(),E("div",K,[g(S,{ref_key:"searchFormRef",ref:a,model:e,"label-width":n.searchConfig.labelWidth??"80px",size:"large"},{default:r(()=>[g(w,{gutter:20},{default:r(()=>[(t(!0),E(x,null,F(n.searchConfig.formItems,o=>(t(),i(U,{key:o.prop,span:8},{default:r(()=>[g(v,{label:o.label,prop:o.prop},{default:r(()=>[o.type==="input"?(t(),i(R,{key:0,modelValue:e[o.prop],"onUpdate:modelValue":d=>e[o.prop]=d,placeholder:o.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):k("",!0),o.type==="date-picker"?(t(),i(s,{key:1,modelValue:e[o.prop],"onUpdate:modelValue":d=>e[o.prop]=d,type:"daterange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),o.type==="select"?(t(),i(f,{key:2,modelValue:e[o.prop],"onUpdate:modelValue":d=>e[o.prop]=d,type:"daterange",placeholder:o.placeholder,style:{width:"100%"}},{default:r(()=>[(t(!0),E(x,null,F(o.options,d=>(t(),i(u,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):k("",!0)]),_:2},1032,["label","prop"])]),_:2},1024))),128))]),_:1})]),_:1},8,["model","label-width"]),D("div",X,[g(I,{size:"large",icon:"Refresh",onClick:C},{default:r(()=>[P("重置 ")]),_:1}),g(I,{size:"large",icon:"Search",type:"primary",onClick:V},{default:r(()=>[P("查询 ")]),_:1})])])}}});const me=O(Y,[["__scopeId","data-v-bcc74da5"]]),Z={class:"modal"},ee={class:"form"},le={class:"dialog-footer"},oe=q({__name:"page-modal",props:{modalConfig:null,otherInfo:null},setup(n,{expose:m}){const p=n,c={};for(const s of p.modalConfig.formItems)c[s.prop]=s.initialValue??"";const e=b(!1);let a=A(c);const C=b(!1),V=b(),_=H();function N(s,u){if(e.value=!0,s==="edit"){C.value=!0,V.value=u;for(const f in u)a[f]=u[f]}else{C.value=!1,V.value=null;for(const f in a){const v=p.modalConfig.formItems.find(U=>U.prop===f);a[f]=v?v.initialValue:""}}}const R=()=>{e.value=!1;let s={...a};p.otherInfo&&(s={...s,...p.otherInfo}),C.value&&V.value?_.editPageUserAcion(p.modalConfig.pageName,V.value.id,s):_.createPageUserAcion(p.modalConfig.pageName,s)};return m({setModalVisible:N}),(s,u)=>{const f=M,v=$,U=L,w=z,S=Q,I=T,o=B,d=G;return t(),E("div",Z,[g(d,{modelValue:e.value,"onUpdate:modelValue":u[1]||(u[1]=l=>e.value=l),title:C.value?n.modalConfig.header.editTitle:n.modalConfig.header.newTitle,width:"30%",center:""},{footer:r(()=>[D("span",le,[g(o,{onClick:u[0]||(u[0]=l=>e.value=!1)},{default:r(()=>[P("取消")]),_:1}),g(o,{type:"primary",onClick:R},{default:r(()=>[P(" 确定 ")]),_:1})])]),default:r(()=>[D("div",ee,[g(I,{model:y(a),"label-width":"100px"},{default:r(()=>[(t(!0),E(x,null,F(n.modalConfig.formItems,l=>(t(),i(S,{key:l.prop,label:l.label,prop:l.prop},{default:r(()=>[l.type==="input"?(t(),i(f,{key:0,modelValue:y(a)[l.prop],"onUpdate:modelValue":h=>y(a)[l.prop]=h,placeholder:l.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):k("",!0),l.type==="date-picker"?(t(),i(v,{key:1,modelValue:y(a)[l.prop],"onUpdate:modelValue":h=>y(a)[l.prop]=h,type:"daterange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),l.type==="select"?(t(),i(w,{key:2,modelValue:y(a)[l.prop],"onUpdate:modelValue":h=>y(a)[l.prop]=h,type:"daterange",placeholder:l.placeholder,style:{width:"100%"}},{default:r(()=>[(t(!0),E(x,null,F(l.options,h=>(t(),i(U,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):k("",!0),l.type==="custom"?J(s.$slots,l.slotName,{key:3},void 0,!0):k("",!0)]),_:2},1032,["label","prop"]))),128))]),_:3},8,["model"])])]),_:3},8,["modelValue","title"])])}}}),_e=O(oe,[["__scopeId","data-v-d19b8773"]]);function fe(){const n=b();return{contentRef:n,handleQueryClick:c=>{var e;(e=n.value)==null||e.fetchPageList(c)},handleResetClick:()=>{var c;(c=n.value)==null||c.fetchPageList()}}}function he(n){const m=b();return{modalRef:m,handleCreateClick:()=>{var e;(e=m.value)==null||e.setModalVisible("create")},handleEditClick:e=>{var a;console.log(e.menuList),(a=m.value)==null||a.setModalVisible("edit",e),n&&n(e)}}}export{me as P,he as a,_e as p,fe as u};
