import"./base-5abc892d.js";import{f as $}from"./el-button-9b3b308d.js";import{E as L}from"./el-message-cfa4b0b8.js";import{a as G,E as H,b as J,c as K}from"./el-col-1cb83c9b.js";import{E as B,a as M,u as q,b as W,c as X,d as Y,f as F}from"./el-overlay-f2a1ea88.js";import"./el-tooltip-9505b920.js";import{E as P,a as Q}from"./index-83542812.js";import{d as z,as as j,au as k,o as y,c as E,a as e,w as l,p as w,y as v,aL as R,u as d,aq as Z,an as ee,m as A,n as le,F as N,aw as T}from"./runtime-core.esm-bundler-e80ae98b.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import{s as O}from"./index-320edd99.js";import{u as te}from"./index-3f986f63.js";import"./config-provider-04140dd0.js";import"./_commonjsHelpers-edff4021.js";import"./vnode-147aa581.js";import"./refs-2b393c62.js";const ae={class:"search"},oe={class:"btns"},ne=z({__name:"user-search",emits:["queryClick","resetClick"],setup(V,{emit:b}){const s=j({name:"",realname:"",cellphone:"",enable:"",createAt:""}),a=k(),u=()=>{var g;(g=a.value)==null||g.resetFields(),b("resetClick")},m=()=>{b("queryClick",s)};return(g,o)=>{const _=L,h=P,C=G,U=B,x=M,t=H,p=J,i=Q,f=$;return y(),E("div",ae,[e(i,{ref_key:"searchFormRef",ref:a,model:s,"label-width":"80px",size:"large"},{default:l(()=>[e(p,{gutter:20},{default:l(()=>[e(C,{span:8},{default:l(()=>[e(h,{label:"用户名",prop:"name"},{default:l(()=>[e(_,{modelValue:s.name,"onUpdate:modelValue":o[0]||(o[0]=r=>s.name=r),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:8},{default:l(()=>[e(h,{prop:"realName",label:"真实姓名"},{default:l(()=>[e(_,{modelValue:s.realname,"onUpdate:modelValue":o[1]||(o[1]=r=>s.realname=r),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:8},{default:l(()=>[e(h,{label:"电话号码",prop:"cellPhone"},{default:l(()=>[e(_,{modelValue:s.cellphone,"onUpdate:modelValue":o[2]||(o[2]=r=>s.cellphone=r),placeholder:"请输入电话号码"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:8},{default:l(()=>[e(h,{label:"状态",prop:"enable"},{default:l(()=>[e(x,{modelValue:s.enable,"onUpdate:modelValue":o[3]||(o[3]=r=>s.enable=r),placeholder:"请选择查询的状态",style:{width:"100%"}},{default:l(()=>[e(U,{label:"启用",value:0}),e(U,{label:"禁用",value:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(C,{span:8},{default:l(()=>[e(h,{label:"创建时间",prop:"createTime"},{default:l(()=>[e(t,{modelValue:s.createAt,"onUpdate:modelValue":o[4]||(o[4]=r=>s.createAt=r),type:"daterange","range-separator":"To","start-placeholder":"开始时间","end-placeholder":"结束时间",size:"default"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),w("div",oe,[e(f,{size:"large",icon:"Refresh",onClick:u},{default:l(()=>[v("重置 ")]),_:1}),e(f,{size:"large",icon:"Search",type:"primary",onClick:m},{default:l(()=>[v("查询 ")]),_:1})])])}}});const se=D(ne,[["__scopeId","data-v-7cabe1a2"]]),re=V=>(Z("data-v-79e30e01"),V=V(),ee(),V),de={class:"content"},pe={class:"header"},ie=re(()=>w("h3",{class:"title"},"用户列表",-1)),ue={class:"table"},ce={class:"pagination"},_e=z({__name:"user-content",emits:["newUserClick","editUserClick"],setup(V,{expose:b,emit:s}){const a=q(),u=k(1),m=k(10);t();const{usersList:g,usersTotalCount:o}=O(a),_=()=>{t()},h=()=>{t()},C=p=>{a.deleteUserByIdAction(p),t()},U=p=>{s("editUserClick",p)},x=()=>{s("newUserClick")};function t(p={}){const i=m.value,f=(u.value-1)*i,I={...{size:i,offset:f},...p};a.getUsersListAction(I)}return b({fetchUsersList:t}),(p,i)=>{const f=$,r=W,I=X,S=Y;return y(),E("div",de,[w("div",pe,[ie,e(f,{type:"primary",onClick:x},{default:l(()=>[v("新建用户 ")]),_:1})]),w("div",ue,[e(I,{data:d(g),border:"",style:{width:"100%"}},{default:l(()=>[e(r,{align:"center",type:"selection"}),e(r,{type:"index",align:"center",label:"序号",width:"60px"}),e(r,{prop:"name",align:"center",label:"用户名",width:"120px"}),e(r,{prop:"realname",align:"center",label:"真实姓名"}),e(r,{prop:"cellphone",align:"center",label:"手机号码"}),e(r,{prop:"enable",align:"center",label:"状态",width:"100px"},{default:l(c=>[e(f,{size:"small",type:c.row.enable?"primary":"danger",plain:""},{default:l(()=>[v(R(c.row.enable?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),v(" > "),e(r,{prop:"createAt",align:"center",width:"210px",label:"创建时间"},{default:l(c=>[v(R(d(F)(c.row.updateAt)),1)]),_:1}),e(r,{prop:"updateAt",align:"center",width:"210px",label:"更新时间"},{default:l(c=>[v(R(d(F)(c.row.createAt)),1)]),_:1}),e(r,{align:"center",label:"操作",width:"210px"},{default:l(c=>[e(f,{icon:"Edit",text:"",type:"primary",onClick:n=>U(c.row)},{default:l(()=>[v("编辑 ")]),_:2},1032,["onClick"]),e(f,{icon:"Delete",text:"",type:"danger",onClick:n=>C(c.row.id)},{default:l(()=>[v("删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),w("div",ce,[e(S,{"current-page":u.value,"onUpdate:current-page":i[0]||(i[0]=c=>u.value=c),"page-size":m.value,"onUpdate:page-size":i[1]||(i[1]=c=>m.value=c),"page-sizes":[10,20,30],small:"small",layout:"total, sizes, prev, pager, next, jumper",total:d(o),onSizeChange:_,onCurrentChange:h},null,8,["current-page","page-size","total"])])])}}});const me=D(_e,[["__scopeId","data-v-79e30e01"]]),fe={class:"modal"},ve={class:"form"},be={class:"dialog-footer"},he=z({__name:"user-modal",setup(V,{expose:b}){const s=k(!1);let a=j({name:"",realname:"",password:"",cellphone:"",roleId:"",departmentId:""});const u=k(!1),m=k(),g=te(),{entireDepartments:o,entireRoles:_}=O(g),h=q();function C(x,t){if(s.value=!0,x==="edit"){u.value=!0,m.value=t,console.log(m.value);for(const p in t)a[p]=t[p]}else{u.value=!1,m.value=null;for(const p in a)a[p]=""}}const U=()=>{s.value=!1,u.value&&m.value?h.editUserAction(m.value.id,a):h.createUserAction(a)};return b({setModalVisible:C}),(x,t)=>{const p=L,i=P,f=B,r=M,I=Q,S=$,c=K;return y(),E("div",fe,[e(c,{modelValue:s.value,"onUpdate:modelValue":t[7]||(t[7]=n=>s.value=n),title:u.value?"编辑用户":"新建用户",width:"30%",center:""},{footer:l(()=>[w("span",be,[e(S,{onClick:t[6]||(t[6]=n=>s.value=!1)},{default:l(()=>[v("取消")]),_:1}),e(S,{type:"primary",onClick:U},{default:l(()=>[v(" 确定 ")]),_:1})])]),default:l(()=>[w("div",ve,[e(I,{model:d(a),"label-width":"100px"},{default:l(()=>[e(i,{label:"用户名",prop:"name"},{default:l(()=>[e(p,{modelValue:d(a).name,"onUpdate:modelValue":t[0]||(t[0]=n=>d(a).name=n),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),e(i,{label:"真实姓名",prop:"realname"},{default:l(()=>[e(p,{modelValue:d(a).realname,"onUpdate:modelValue":t[1]||(t[1]=n=>d(a).realname=n),placeholder:"请输入用户真实姓名"},null,8,["modelValue"])]),_:1}),u.value?le("",!0):(y(),A(i,{key:0,label:"密码",prop:"password"},{default:l(()=>[e(p,{modelValue:d(a).password,"onUpdate:modelValue":t[2]||(t[2]=n=>d(a).password=n),"show-password":"",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1})),e(i,{label:"手机号码",prop:"cellphone"},{default:l(()=>[e(p,{modelValue:d(a).cellphone,"onUpdate:modelValue":t[3]||(t[3]=n=>d(a).cellphone=n),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1}),e(i,{label:"选择角色",prop:"roleId"},{default:l(()=>[e(r,{modelValue:d(a).roleId,"onUpdate:modelValue":t[4]||(t[4]=n=>d(a).roleId=n),placeholder:"请输入用户角色",style:{width:"100%"}},{default:l(()=>[(y(!0),E(N,null,T(d(_),n=>(y(),A(f,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"选择部门",prop:"departmentId"},{default:l(()=>[e(r,{modelValue:d(a).departmentId,"onUpdate:modelValue":t[5]||(t[5]=n=>d(a).departmentId=n),placeholder:"请输入用户角色",style:{width:"100%"}},{default:l(()=>[(y(!0),E(N,null,T(d(o),n=>(y(),A(f,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue","title"])])}}});const ge=D(he,[["__scopeId","data-v-5bd05eda"]]),Fe=z({__name:"index",setup(V){const b=k(),s=o=>{var _;(_=b.value)==null||_.fetchUsersList(o)},a=()=>{var o;(o=b.value)==null||o.fetchUsersList()},u=k(),m=()=>{var o;(o=u.value)==null||o.setModalVisible("create")},g=o=>{var _;(_=u.value)==null||_.setModalVisible("edit",o)};return(o,_)=>(y(),E("div",null,[e(se,{onQueryClick:s,onResetClick:a}),e(me,{ref_key:"contentRef",ref:b,onNewUserClick:m,onEditUserClick:g},null,512),e(ge,{ref_key:"modalRef",ref:u},null,512)]))}});export{Fe as default};
